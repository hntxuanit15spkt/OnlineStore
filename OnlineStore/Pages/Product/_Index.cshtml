@page
@using DAL.Models
@using DAL.Data.Enums;
@model OnlineStore.Pages.Product._IndexModel


@{
    ViewData["Title"] = "Index";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}
<link href="~/node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/css/client/home/style.css" rel="stylesheet" />
<link href="~/css/client/home/style4.css" rel="stylesheet" />
<link href="~/css/client/home/jstarbox.css" rel="stylesheet" />
<!--banner-->
<div class="banner-top">
    <div class="container">
        <h1>Products</h1>
        <em></em>
        <h2><a href="index.html">Home</a><label>/</label>Products</h2>
    </div>
</div>


<!--content-->
<div class="product">
    <div class="container">
        <div class="col-md-2 product-bottom">

            <!--categories-->
            <div class=" rsidebar span_1_of_left">
                <h4 class="cate">Categories</h4>
                <ul class="menu-drop">

                    <li class="item1">
                        <a href="#">Men </a>
                        <ul class="cute">
                            <li class="subitem1"><a href="product.html">Cute Kittens </a></li>
                            <li class="subitem2"><a href="product.html">Strange Stuff </a></li>
                            <li class="subitem3"><a href="product.html">Automatic Fails </a></li>
                        </ul>
                    </li>
                    <li class="item2">
                        <a href=""></a>

                        <ul class="cute">
                            <li class="subitem1"><a href="product.html">Cute Kittens </a></li>
                            <li class="subitem2"><a href="product.html">Strange Stuff </a></li>
                            <li class="subitem3"><a href="product.html">Automatic Fails </a></li>
                        </ul>
                    </li>


                </ul>
            </div>

        </div>
        <div class="col-md-10">
            <div class="mid-popular">
                <div class="col-md-offset-9">
                    Sắp xếp theo: <select asp-for="CurrentSort" asp-items="Html.GetEnumSelectList<SortType>()" onchange="sortProduct()"></select>
                </div>
                <input type="hidden" asp-for="CurrentPage" />
                <div class="grid-in">
                    @await Html.PartialAsync("_SearchResultGridPartial", Model.Items)
                </div>
                <div class="clearfix"></div>
            </div>
        </div>

        <div class="clearfix"></div>
    </div>
    <!--products-->
    <!--//products-->
</div>
<script src="~/node_modules/jquery/dist/jquery.min.js"></script>
<script src="~/js/client/home/jstarbox.js"></script>
<script src="~/js/client/home/simpleCart.min.js"></script>
<script src="~/js/client/home/jquery.chocolat.js"></script>
<link href="~/css/client/home/chocolat.css" rel="stylesheet" />


@*@section Scripts{

        <script src="~/product-site/js/product-style.js"></script>
    }*@


<script>
    jQuery.ajaxSettings.traditional = true;
    var listBrandName = [];
function sortProduct() {
    $('#CurrentPage').val(1);
    $.ajax({
        type: "GET",
        url: "/Product/_Index?handler=Search",
        data: {
            "currentSearchString": "@Model.CurrentSearchString",
            "currentSort": $('#CurrentSort option:selected').val(),
            "currentBrand": listBrandName
        }
    }).done(function (result) {
        $(".bottom-product").html(result);
    }).fail(function (result) {
        console.log(result);
    });
}
</script>